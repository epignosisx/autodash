@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<Autodash.Core.UI.Models.CreateSuiteVm>
@{
    Layout = "_Layout.cshtml";

    string parallelExecutionTooltip = "Parallel execution speeds up suite run execution. However, depending on the test it could bring unexpected results. Ex: if a test adds a product to the shopping cart of user 'A', and then tries to validate the shopping cart product count was incremented, it could potentially find that the product was incremented twice because of another browser excution incrementing the cart for user 'A'.";
}

<h1>New Test Suite</h1>

<form method="post" enctype="multipart/form-data" action="/suites/create">

    @Html.Partial("_ValidationSummary", Model.Errors)

    <input type="hidden" name="ProjectId" value="@Model.ProjectId" />

    <div class="form-group">
        <label for="SuiteName">Suite Name</label>
        <input type="text" class="form-control" name="SuiteName" value="@Model.SuiteName" required maxlength="100" />
    </div>

    <div class="form-group">
        <label for="TestAssembliesZip">Test Assemblies</label>
        <input type="file" class="form-control" name="TestAssembliesZip" required />
    </div>
    
    <fieldset class="mt30">
        <legend>Configuration</legend>
        <div class="form-group">
            <label for="Browsers">Browsers</label>
            <div class="checkbox">
                <label><input type="checkbox" name="Browsers" value="Chrome" checked />Chrome</label>&nbsp;
                <label><input type="checkbox" name="Browsers" value="Firefox" />Firefox</label>&nbsp;
                <label><input type="checkbox" name="Browsers" value="InternetExplorer" />IE</label>
            </div>
        </div>

        <div class="form-group">
            <label for="EnableBrowserExecutionInParallel">
                <input type="checkbox" name="EnableBrowserExecutionInParallel" @(Model.EnableBrowserExecutionInParallel ? "checked='checked'" : "") />
                Enable parallel execution of tests in browsers
            </label>
            <p class="help-block">
                By enabling parallel execution each test will be run simultaneously in all selected browsers.
                <a href="#" data-toggle="popover" data-content="@parallelExecutionTooltip"><span class="glyphicon glyphicon-question-sign text-danger"></span></a>
            </p>
        </div>

        <div class="form-group">
            <label for="RetryAttempts">Retry attempts</label>
            <input type="number" class="form-control" name="RetryAttempts" value="@Model.RetryAttempts" required maxlength="1" />
        </div>

        <div class="form-group">
            <label for="RetryAttempts">Test Timeout</label>
            <div class="input-group">
                <input type="number" class="form-control" name="TestTimeout" value="@Model.TestTimeoutMinutes" required />
                <div class="input-group-addon">minutes</div>
            </div>
        </div>
    </fieldset>

    <fieldset class="mt30">
        <legend>Schedule (optional)</legend>

        <div class="form-group">
            <label for="Time">Run at</label>
            <input type="text" class="form-control" name="Time" value="@Model.Time" pattern="^\d\d?:\d\d$" placeholder="Ex: 14:00" />
        </div>

        <div class="form-group">
            <label for="Interval">Every</label>
            <div class="input-group">
                <input type="text" class="form-control" name="IntervalHours" value="@Model.IntervalHours" placeholder="Ex: 24" />
                <div class="input-group-addon">hours</div>
            </div>
        </div>
    </fieldset>

    <button type="submit" class="btn btn-success">Submit</button>
</form>

@section scripts{
    <script>
        $(function () {
            $('[data-toggle="popover"]').popover();
        })
    </script>
}